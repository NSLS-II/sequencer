###############################################################################
# $Id: demo.vws,v 1.1.1.1 2000-04-04 03:23:05 wlupton Exp $
#
# EPICS / VxWorks startup script for sequencer demo

# application binary directory (has to be edited by hand)
topbin = "/home/wlupton/epics/seq/bin/vxWorks-ppc604"

###############################################################################
# Initial housekeeping

# set prompt (indicates which IOC and application software version)
shellPromptSet "demo> "

# Make delete key work for backspace
tyBackspaceSet 0177

###############################################################################
# Load EPICS software and local driver and device support

# Load system code and sequencer (NB, local sequencer)
cd topbin
ld < demoIocLibrary
ld < pvLibrary
ld < seqLibrary

# Perform once-only thread initialization
threadInit

###############################################################################
# Load local application code

# demo sequencer
ld < demo.o

###############################################################################
# Create / configure drivers

# timestamp: master, syncRate, clockRate, masterPort, slavePort, timeout, type
TSconfigure( 1, 0, 0, 0, 0, 0, 0 )

###############################################################################
# Load ASCII databases

# database definition
cd "../../dbd"
dbLoadDatabase "records.dbd"
registerRecordDeviceDriver(pdbbase)

# demo database
dbLoadRecords "demo.db"

###############################################################################
# Initialize IOC

iocInit

###############################################################################
# Final initialization

###############################################################################
#			IOC INITIALIZATION COMPLETE			      #
###############################################################################

# Uncomment to run sequencer in IOC
sp seq, &demo

