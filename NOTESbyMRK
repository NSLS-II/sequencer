Version 2.1
(for EPICS release 3.14.0alpha2 and later)


<top>/README should be updated to reflect the new release.

Where is the release encoded in the files?

I think config should be removed. Just require 3.14 and later


in test/simple and test/validate
     assign v to "grw:xxxExample";
     changed to
     assign v to "{user}:xxxExample";

in src/dev
    dev.c renamed to devSequencer.c
    seq.dbd renamed to devSequencer.dbd

in src/snc
    The generated main program is different. See below
    New option -i. See below

in src/seq
    seq now returns an epicsThreadId
    all addesses now printed with %p
    several epicsPrintf replaced with printf.
    Got rid of simple shell supplied by seq. No longer needed.


cd <top>/test/simple/O.<arch>
sncExample -s "user=???" 

To run 


Changes for doc

Version 2.1 (for EPICS base release 3.14.0alpha2 and later)



Compiler Options

+i Code will be generated to automatically register sequence functions
and state programs. This is the default

-i Do not generate registration code. Only useful on vxWorks to save a small amount of memory.

Compiling and linking a state program under Unix.

The exampleApp supplied with base demonstrates how to build sequence programs
that work with epics databases.

Look at test/simple to see how to build a sequence program that runs 
without databases running in the same process.


The main program generated by the +m compiler options looks like.

int main(int argc,char *argv[]) {
    char * macro_def;
    epicsThreadId threadId;
    int callIoccrf = 0;
    if(argc>1 && strcmp(argv[1],"-s")==0) {
        callIoccrf=1;
        --argc; ++argv;
    }
    macro_def = (argc>1)?argv[1]:NULL;
    threadId = seq((void *)&snctest, macro_def, 0);
    if(callIoccrf) {
        ioccrf(0);
    } else {
        epicsThreadExitMain();
    }
    return(0);
}


Such a program is invoked via the call

snctest -s "xxx=xxx,..."

If the -s option is specified iocsh is started. This allows the user
to issue sequence commands like seqShow. If the -s option is not given,
the shell is not started. If a program is atarted as a background process
thye -s option should not be nspecified.

The other option argument is macro substitutions.
